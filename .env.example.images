# Product Image Storage Configuration
# A2.4 - Product image storage/CDN

# ==============================================
# AWS Configuration (Production)
# ==============================================

# AWS Region
AWS_REGION=us-east-1

# AWS Credentials
AWS_ACCESS_KEY_ID=your_access_key_here
AWS_SECRET_ACCESS_KEY=your_secret_key_here

# S3 Bucket for Product Images
S3_BUCKET=wic-benefits-product-images

# CloudFront CDN Base URL (optional, but recommended)
# If not set, uses S3 direct URLs
CDN_BASE_URL=https://d1234567890.cloudfront.net

# ==============================================
# Local Development Configuration
# ==============================================

# Environment (development/production)
NODE_ENV=development

# Local image storage path (development only)
# Images are saved to this directory when NODE_ENV=development
LOCAL_IMAGE_PATH=./storage/images

# ==============================================
# Image Processing Configuration
# ==============================================

# Enable image proxy/caching for external URLs
ENABLE_IMAGE_PROXY=true

# Proxy cache TTL in seconds (7 days)
PROXY_CACHE_TTL=604800

# ==============================================
# Sync Job Configuration
# ==============================================

# Batch size for processing products
IMAGE_SYNC_BATCH_SIZE=100

# Concurrent image uploads
IMAGE_SYNC_CONCURRENCY=5

# Skip products that already have images
IMAGE_SYNC_SKIP_EXISTING=true

# Max retries per image
IMAGE_SYNC_MAX_RETRIES=3

# ==============================================
# Setup Instructions
# ==============================================

# 1. Development Setup (Local)
#    - Set NODE_ENV=development
#    - Images will be stored in LOCAL_IMAGE_PATH
#    - No AWS credentials needed
#    - Access via http://localhost:3000/images/...

# 2. Production Setup (AWS S3 + CloudFront)
#    a. Create S3 Bucket:
#       aws s3api create-bucket --bucket wic-benefits-product-images --region us-east-1
#
#    b. Set Bucket Policy (public read):
#       aws s3api put-bucket-policy --bucket wic-benefits-product-images --policy file://bucket-policy.json
#
#    c. Create CloudFront Distribution:
#       aws cloudfront create-distribution --origin-domain-name wic-benefits-product-images.s3.amazonaws.com
#
#    d. Create IAM User with S3 permissions:
#       - s3:PutObject
#       - s3:GetObject
#       - s3:DeleteObject
#       - s3:ListBucket
#
#    e. Set environment variables:
#       - AWS_ACCESS_KEY_ID
#       - AWS_SECRET_ACCESS_KEY
#       - S3_BUCKET
#       - CDN_BASE_URL (from CloudFront)

# 3. Run Image Sync:
#    npm run sync-images              # Sync all missing images
#    npm run sync-images -- --all     # Force sync all
#    npm run sync-images -- --stats   # Show statistics

# ==============================================
# Cost Estimates
# ==============================================

# S3 Storage:
# - ~$0.023/GB/month (S3 Standard)
# - 100K products Ã— 500KB = ~50GB = $1.15/month

# CloudFront Transfer:
# - Free for first 1TB/month (AWS Free Tier)
# - $0.085/GB after that

# Total Estimated Cost:
# - Development: $0 (local storage)
# - Production: ~$2-5/month (for 100K products)
